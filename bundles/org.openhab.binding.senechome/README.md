# Senec Home Binding

Binding to request status information from Senec Home Batteries to allow home automation decisions based on your current energy management.

If your power feed is limited by regulations for example, you can switch on devices if a limited rate was applied by your Senec Home device.
In addition you can switch off devices if the power consumption is getting higher.

Examples: Lights, pool filters, wash machines, ...

## Supported Things

| Thing type id        | Name                                          |
|----------------------|-----------------------------------------------|
| senechome            | Senec Home Lithium Battery, V2.0, V2.1 and V3 |


## Thing Configuration

demo.things

```
Thing senechome:senechome:pvbattery [ hostname="192.168.0.128", refreshInterval=60, limitationTresholdValue=70, limitationDuration=60 ]
```

If the thing goes online then the connection to the web interface is successful.
In case it is offline you should see an error message.
The refresh interval is 15 seconds by default, but you can optionally provide your own value adding the `refreshInterval` key.

The property `limitationTresholdValue` is used as threshold for channel `powerLimitationState`. It is combined with property `limitationDuration` (seconds) to define a stable status for power limitation. Therefor use `powerLimitationState` to trigger Events (switches) based on your current power limitation.

## Channels

| Channel              | Type    | Description                                                              |
|----------------------|---------|--------------------------------------------------------------------------|
| powerLimitation      | percent | How much is your pv generator limited (0% if not limited anyway)         |
| powerLimitationState | ON/OFF  | Power limitation active (based on configuration)                         |
| houseConsumption     | watt    | Current power consumption of your house/living                           |
| energyProduction     | watt    | Energy generated by your pv / inverter                                   |
| batteryPower         | watt    | Energy processed by batterie itself, for example while charging          |
| batteryFuelCharge    | percent | Fuel charge of your battery (0 - 100%)                                   |
| batteryState         |         | text describing current action of battery (e.g. CHARGING)                |
| gridPower            | watt    | Grid power level, negative for supply, positive values for drawing power |
| gridPowerDraw        | watt    | absolute power level of power draw, zero while supplying                 |
| gridPowerSupply      | watt    | absolute power level of power supply, zero while drawing                 |

## Items

Sample:

```
Number SenecPowerLimitation      "pv generator limit [%d %%]"         <heating> { channel="senechome:senechome:pvbattery:powerLimitation" }
Switch SenecPowerLimitationState "Power limitation active"             <switch> { channel="senechome:senechome:pvbattery:powerLimitationState" }
Number SenecHouseConsumption     "Current power consumption [%d W]"    <energy> { channel="senechome:senechome:pvbattery:houseConsumption" }
Number SenecEnergyProduction     "Energy generated by pv [%d W]"       <energy> { channel="senechome:senechome:pvbattery:energyProduction" }
Number SenecBatteryPower         "Energy processed by battery [%d W]"  <energy> { channel="senechome:senechome:pvbattery:batteryPower" }
Number SenecBatteryFuelCharge    "State of Charge [%d %%]"       <batterylevel> { channel="senechome:senechome:pvbattery:batteryFuelCharge" }
String SenecBatteryState         "Current action [%s]"                   <text> { channel="senechome:senechome:pvbattery:batteryState" }
Number SenecGridPower            "Grid power level [%d W]"             <energy> { channel="senechome:senechome:pvbattery:gridPower" }
Number SenecGridPowerDraw        "Power draw from grid [%d W]"         <energy> { channel="senechome:senechome:pvbattery:gridPowerDraw" }
Number SenecGridPowerSupply      "Power supply to grid [%d W]"         <energy> { channel="senechome:senechome:pvbattery:gridPowerSupply" }
```

## Sitemap

Sample:

```
Text label="Power Grid"{
    Frame label="Photovoltaik" {
        Default item=SenecPowerLimitation
        Default item=SenecPowerLimitationState
        Default item=SenecHouseConsumption
        Default item=SenecEnergyProduction
        Default item=SenecBatteryPower
        Default item=SenecBatteryFuelCharge
        Default item=SenecBatteryState
        Default item=SenecGridPower
        Default item=SenecGridPowerDraw
        Default item=SenecGridPowerSupply
    }
}
```